<pre><tt><font color="#000000">001: </font><b><font color="#000080">import</font></b> java<font color="#990000">.</font>awt<font color="#990000">.</font><font color="#990000">*</font><font color="#990000">;</font>
<font color="#000000">002: </font><b><font color="#000080">import</font></b> java<font color="#990000">.</font>awt<font color="#990000">.</font>event<font color="#990000">.</font><font color="#990000">*</font><font color="#990000">;</font>
<font color="#000000">003: </font><b><font color="#000080">import</font></b> java<font color="#990000">.</font>io<font color="#990000">.</font><font color="#990000">*</font><font color="#990000">;</font>
<font color="#000000">004: </font><b><font color="#000080">import</font></b> javax<font color="#990000">.</font>swing<font color="#990000">.</font><font color="#990000">*</font><font color="#990000">;</font>
<font color="#000000">005: </font>
<font color="#000000">006: </font><i><font color="#9A1900">/**</font></i>
<font color="#000000">007: </font><i><font color="#9A1900">   This frame shows the toolbar and the graph.</font></i>
<font color="#000000">008: </font><i><font color="#9A1900">*/</font></i>
<font color="#000000">009: </font><b><font color="#0000FF">public</font></b> <b><font color="#0000FF">class</font></b> GraphFrame <b><font color="#0000FF">extends</font></b> JFrame
<font color="#000000">010: </font><font color="#FF0000">{</font>
<font color="#000000">011: </font>   <i><font color="#9A1900">/**</font></i>
<font color="#000000">012: </font><i><font color="#9A1900">      Constructs a graph frame that displays a given graph.</font></i>
<font color="#000000">013: </font><i><font color="#9A1900">      @param graph the graph to display</font></i>
<font color="#000000">014: </font><i><font color="#9A1900">   */</font></i>
<font color="#000000">015: </font>   <b><font color="#0000FF">public</font></b> <b><font color="#000000">GraphFrame</font></b><font color="#990000">(</font><b><font color="#0000FF">final</font></b> Graph graph<font color="#990000">)</font>
<font color="#000000">016: </font>   <font color="#FF0000">{</font>
<font color="#000000">017: </font>      <b><font color="#000000">setSize</font></b><font color="#990000">(</font>FRAME_WIDTH<font color="#990000">,</font> FRAME_HEIGHT<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">018: </font>      <b><font color="#000000">setDefaultCloseOperation</font></b><font color="#990000">(</font>JFrame<font color="#990000">.</font>EXIT_ON_CLOSE<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">019: </font>
<font color="#000000">020: </font>      <b><font color="#0000FF">this</font></b><font color="#990000">.</font>graph <font color="#990000">=</font> graph<font color="#990000">;</font>
<font color="#000000">021: </font>
<font color="#000000">022: </font>      <b><font color="#000000">constructFrameComponents</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">023: </font>      <i><font color="#9A1900">// Set up menus</font></i>
<font color="#000000">024: </font>
<font color="#000000">025: </font>      JMenuBar menuBar <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenuBar</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">026: </font>      <b><font color="#000000">setJMenuBar</font></b><font color="#990000">(</font>menuBar<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">027: </font>      JMenu fileMenu <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenu</font></b><font color="#990000">(</font><font color="#FF0000">"File"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">028: </font>      menuBar<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>fileMenu<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">029: </font>
<font color="#000000">030: </font>      JMenuItem openItem <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenuItem</font></b><font color="#990000">(</font><font color="#FF0000">"Open"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">031: </font>      openItem<font color="#990000">.</font><b><font color="#000000">addActionListener</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b>
<font color="#000000">032: </font>         <b><font color="#000000">ActionListener</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">033: </font>         <font color="#FF0000">{</font>
<font color="#000000">034: </font>            <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">actionPerformed</font></b><font color="#990000">(</font>ActionEvent event<font color="#990000">)</font>
<font color="#000000">035: </font>            <font color="#FF0000">{</font>
<font color="#000000">036: </font>               <b><font color="#000000">openFile</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">037: </font>            <font color="#FF0000">}</font>
<font color="#000000">038: </font>         <font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">039: </font>      fileMenu<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>openItem<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">040: </font>
<font color="#000000">041: </font>      JMenuItem saveItem <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenuItem</font></b><font color="#990000">(</font><font color="#FF0000">"Save"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">042: </font>      saveItem<font color="#990000">.</font><b><font color="#000000">addActionListener</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b>
<font color="#000000">043: </font>         <b><font color="#000000">ActionListener</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">044: </font>         <font color="#FF0000">{</font>
<font color="#000000">045: </font>            <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">actionPerformed</font></b><font color="#990000">(</font>ActionEvent event<font color="#990000">)</font>
<font color="#000000">046: </font>            <font color="#FF0000">{</font>
<font color="#000000">047: </font>               <b><font color="#000000">saveFile</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">048: </font>            <font color="#FF0000">}</font>
<font color="#000000">049: </font>         <font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">050: </font>      fileMenu<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>saveItem<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">051: </font>
<font color="#000000">052: </font>      JMenuItem exitItem <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenuItem</font></b><font color="#990000">(</font><font color="#FF0000">"Exit"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">053: </font>      exitItem<font color="#990000">.</font><b><font color="#000000">addActionListener</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b>
<font color="#000000">054: </font>         <b><font color="#000000">ActionListener</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">055: </font>         <font color="#FF0000">{</font>
<font color="#000000">056: </font>            <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">actionPerformed</font></b><font color="#990000">(</font>ActionEvent event<font color="#990000">)</font>
<font color="#000000">057: </font>            <font color="#FF0000">{</font>
<font color="#000000">058: </font>               System<font color="#990000">.</font><b><font color="#000000">exit</font></b><font color="#990000">(</font><font color="#993399">0</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">059: </font>            <font color="#FF0000">}</font>
<font color="#000000">060: </font>         <font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">061: </font>      fileMenu<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>exitItem<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">062: </font>
<font color="#000000">063: </font>      JMenuItem deleteItem <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenuItem</font></b><font color="#990000">(</font><font color="#FF0000">"Delete"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">064: </font>      deleteItem<font color="#990000">.</font><b><font color="#000000">addActionListener</font></b><font color="#990000">(</font><b><font color="#0000FF">new</font></b>
<font color="#000000">065: </font>         <b><font color="#000000">ActionListener</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">066: </font>         <font color="#FF0000">{</font>
<font color="#000000">067: </font>            <b><font color="#0000FF">public</font></b> <font color="#009900">void</font> <b><font color="#000000">actionPerformed</font></b><font color="#990000">(</font>ActionEvent event<font color="#990000">)</font>
<font color="#000000">068: </font>            <font color="#FF0000">{</font>
<font color="#000000">069: </font>               panel<font color="#990000">.</font><b><font color="#000000">removeSelected</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">070: </font>            <font color="#FF0000">}</font>
<font color="#000000">071: </font>         <font color="#FF0000">}</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">072: </font>
<font color="#000000">073: </font>      JMenu editMenu <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JMenu</font></b><font color="#990000">(</font><font color="#FF0000">"Edit"</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">074: </font>      editMenu<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>deleteItem<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">075: </font>      menuBar<font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>editMenu<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">076: </font>   <font color="#FF0000">}</font>
<font color="#000000">077: </font>
<font color="#000000">078: </font>   <i><font color="#9A1900">/**</font></i>
<font color="#000000">079: </font><i><font color="#9A1900">      Constructs the tool bar and graph panel.</font></i>
<font color="#000000">080: </font><i><font color="#9A1900">   */</font></i>
<font color="#000000">081: </font>   <b><font color="#0000FF">private</font></b> <font color="#009900">void</font> <b><font color="#000000">constructFrameComponents</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">082: </font>   <font color="#FF0000">{</font>
<font color="#000000">083: </font>      toolBar <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">ToolBar</font></b><font color="#990000">(</font>graph<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">084: </font>      panel <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">GraphPanel</font></b><font color="#990000">(</font>toolBar<font color="#990000">,</font> graph<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">085: </font>      scrollPane <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JScrollPane</font></b><font color="#990000">(</font>panel<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">086: </font>      <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>toolBar<font color="#990000">,</font> BorderLayout<font color="#990000">.</font>NORTH<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">087: </font>      <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">add</font></b><font color="#990000">(</font>scrollPane<font color="#990000">,</font> BorderLayout<font color="#990000">.</font>CENTER<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">088: </font>   <font color="#FF0000">}</font>
<font color="#000000">089: </font>
<font color="#000000">090: </font>   <i><font color="#9A1900">/**</font></i>
<font color="#000000">091: </font><i><font color="#9A1900">      Asks the user to open a graph file.</font></i>
<font color="#000000">092: </font><i><font color="#9A1900">   */</font></i>
<font color="#000000">093: </font>   <b><font color="#0000FF">private</font></b> <font color="#009900">void</font> <b><font color="#000000">openFile</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">094: </font>   <font color="#FF0000">{</font>
<font color="#000000">095: </font>      <i><font color="#9A1900">// let user select file</font></i>
<font color="#000000">096: </font>
<font color="#000000">097: </font>      JFileChooser fileChooser <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JFileChooser</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">098: </font>      <font color="#009900">int</font> r <font color="#990000">=</font> fileChooser<font color="#990000">.</font><b><font color="#000000">showOpenDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">099: </font>      <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>r <font color="#990000">=</font><font color="#990000">=</font> JFileChooser<font color="#990000">.</font>APPROVE_OPTION<font color="#990000">)</font>
<font color="#000000">100: </font>      <font color="#FF0000">{</font>
<font color="#000000">101: </font>         <i><font color="#9A1900">// Open the file that the user selected</font></i>
<font color="#000000">102: </font>         <b><font color="#0000FF">try</font></b>
<font color="#000000">103: </font>         <font color="#FF0000">{</font>
<font color="#000000">104: </font>            File file <font color="#990000">=</font> fileChooser<font color="#990000">.</font><b><font color="#000000">getSelectedFile</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">105: </font>            ObjectInputStream in <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">ObjectInputStream</font></b><font color="#990000">(</font>
<font color="#000000">106: </font>               <b><font color="#0000FF">new</font></b> <b><font color="#000000">FileInputStream</font></b><font color="#990000">(</font>file<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">107: </font>            graph <font color="#990000">=</font> <font color="#990000">(</font>Graph<font color="#990000">)</font> in<font color="#990000">.</font><b><font color="#000000">readObject</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">108: </font>            in<font color="#990000">.</font><b><font color="#000000">close</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">109: </font>            <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">remove</font></b><font color="#990000">(</font>scrollPane<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">110: </font>            <b><font color="#0000FF">this</font></b><font color="#990000">.</font><b><font color="#000000">remove</font></b><font color="#990000">(</font>toolBar<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">111: </font>            <b><font color="#000000">constructFrameComponents</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">112: </font>            <b><font color="#000000">validate</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">113: </font>            <b><font color="#000000">repaint</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">114: </font>         <font color="#FF0000">}</font>
<font color="#000000">115: </font>         <b><font color="#0000FF">catch</font></b> <font color="#990000">(</font>IOException exception<font color="#990000">)</font>
<font color="#000000">116: </font>         <font color="#FF0000">{</font>
<font color="#000000">117: </font>            JOptionPane<font color="#990000">.</font><b><font color="#000000">showMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">null</font></b><font color="#990000">,</font>
<font color="#000000">118: </font>               exception<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">119: </font>         <font color="#FF0000">}</font>
<font color="#000000">120: </font>         <b><font color="#0000FF">catch</font></b> <font color="#990000">(</font>ClassNotFoundException exception<font color="#990000">)</font>
<font color="#000000">121: </font>         <font color="#FF0000">{</font>
<font color="#000000">122: </font>            JOptionPane<font color="#990000">.</font><b><font color="#000000">showMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">null</font></b><font color="#990000">,</font>
<font color="#000000">123: </font>               exception<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">124: </font>         <font color="#FF0000">}</font>
<font color="#000000">125: </font>      <font color="#FF0000">}</font>
<font color="#000000">126: </font>   <font color="#FF0000">}</font>
<font color="#000000">127: </font>
<font color="#000000">128: </font>   <i><font color="#9A1900">/**</font></i>
<font color="#000000">129: </font><i><font color="#9A1900">      Saves the current graph in a file.</font></i>
<font color="#000000">130: </font><i><font color="#9A1900">   */</font></i>
<font color="#000000">131: </font>   <b><font color="#0000FF">private</font></b> <font color="#009900">void</font> <b><font color="#000000">saveFile</font></b><font color="#990000">(</font><font color="#990000">)</font>
<font color="#000000">132: </font>   <font color="#FF0000">{</font>
<font color="#000000">133: </font>      JFileChooser fileChooser <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">JFileChooser</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">134: </font>      <b><font color="#0000FF">if</font></b> <font color="#990000">(</font>fileChooser<font color="#990000">.</font><b><font color="#000000">showSaveDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">this</font></b><font color="#990000">)</font>
<font color="#000000">135: </font>            <font color="#990000">=</font><font color="#990000">=</font> JFileChooser<font color="#990000">.</font>APPROVE_OPTION<font color="#990000">)</font>
<font color="#000000">136: </font>      <font color="#FF0000">{</font>
<font color="#000000">137: </font>         <b><font color="#0000FF">try</font></b>
<font color="#000000">138: </font>         <font color="#FF0000">{</font>
<font color="#000000">139: </font>            File file <font color="#990000">=</font> fileChooser<font color="#990000">.</font><b><font color="#000000">getSelectedFile</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">140: </font>            ObjectOutputStream out <font color="#990000">=</font> <b><font color="#0000FF">new</font></b> <b><font color="#000000">ObjectOutputStream</font></b><font color="#990000">(</font>
<font color="#000000">141: </font>                  <b><font color="#0000FF">new</font></b> <b><font color="#000000">FileOutputStream</font></b><font color="#990000">(</font>file<font color="#990000">)</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">142: </font>            out<font color="#990000">.</font><b><font color="#000000">writeObject</font></b><font color="#990000">(</font>graph<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">143: </font>            out<font color="#990000">.</font><b><font color="#000000">close</font></b><font color="#990000">(</font><font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">144: </font>         <font color="#FF0000">}</font>
<font color="#000000">145: </font>         <b><font color="#0000FF">catch</font></b> <font color="#990000">(</font>IOException exception<font color="#990000">)</font>
<font color="#000000">146: </font>         <font color="#FF0000">{</font>
<font color="#000000">147: </font>            JOptionPane<font color="#990000">.</font><b><font color="#000000">showMessageDialog</font></b><font color="#990000">(</font><b><font color="#0000FF">null</font></b><font color="#990000">,</font>
<font color="#000000">148: </font>                  exception<font color="#990000">)</font><font color="#990000">;</font>
<font color="#000000">149: </font>         <font color="#FF0000">}</font>
<font color="#000000">150: </font>      <font color="#FF0000">}</font>
<font color="#000000">151: </font>   <font color="#FF0000">}</font>
<font color="#000000">152: </font>
<font color="#000000">153: </font>   <b><font color="#0000FF">private</font></b> Graph graph<font color="#990000">;</font>
<font color="#000000">154: </font>   <b><font color="#0000FF">private</font></b> GraphPanel panel<font color="#990000">;</font>
<font color="#000000">155: </font>   <b><font color="#0000FF">private</font></b> JScrollPane scrollPane<font color="#990000">;</font>
<font color="#000000">156: </font>   <b><font color="#0000FF">private</font></b> ToolBar toolBar<font color="#990000">;</font>
<font color="#000000">157: </font>
<font color="#000000">158: </font>   <b><font color="#0000FF">public</font></b> <b><font color="#0000FF">static</font></b> <b><font color="#0000FF">final</font></b> <font color="#009900">int</font> FRAME_WIDTH <font color="#990000">=</font> <font color="#993399">600</font><font color="#990000">;</font>
<font color="#000000">159: </font>   <b><font color="#0000FF">public</font></b> <b><font color="#0000FF">static</font></b> <b><font color="#0000FF">final</font></b> <font color="#009900">int</font> FRAME_HEIGHT <font color="#990000">=</font> <font color="#993399">400</font><font color="#990000">;</font>
<font color="#000000">160: </font><font color="#FF0000">}</font>
</tt></pre>
